# 2-1

- DISTINCT：
  - 重複をはぶく
- 改行は「句ごとに改行」が原則。むやみに改行しないこと

```sql
SELECT shohin_id, shohin_mei, shiire_tanka FROM Shohin;
SELECT * FROM Shohin;

SELECT  shohin_id AS id,
        shohin_mei AS name,
        shiire_tanka AS tanka
FROM    Shohin;

-- 別名をつける場合は""（ダブルクオート）
SELECT  shohin_id AS "商品ID",
        shohin_mei AS "商品名",
        shiire_tanka AS "仕入れ単価"
FROM Shohin;

-- SELECTには定数もかける
SELECT '商品' AS mojiretsu, 38 AS kazu, '2009-02-24' AS hizuke,
shohin_id, shohin_mei
FROM Shohin;

-- 重複を削除
SELECT DISTINCT shohin_bunrui FROM Shohin;

-- NULLも一つにまとめられる
SELECT DISTINCT shiire_tanka  FROM Shohin;

-- 複数行のDISTINCTの場合、その組み合わせが重複している場合削除
SELECT DISTINCT shohin_bunrui, torokubi FROM Shohin;

SELECT shohin_mei, shohin_bunrui
FROM Shohin
WHERE shohin_bunrui = '衣服';
```

# 2-2

```sql
-- SELECTで計算
SELECT shohin_mei, hanbai_tanka, hanbai_tanka * 2 AS "hanbai_tanka_x2" FROM Shohin;

-- FROM句はなくても使えるというのを一応覚えておく
SELECT (100 + 200) * 3 AS keisan;

-- 比較
SELECT shohin_mei, shohin_bunrui FROM Shohin WHERE hanbai_tanka = 500;

-- '<>' == '!='
SELECT shohin_mei, shohin_bunrui FROM Shohin WHERE hanbai_tanka <> 500;

-- '以上'を表現
SELECT shohin_mei, shohin_bunrui, hanbai_tanka FROM Shohin WHERE hanbai_tanka >= 1000;

-- '超える'を表現
SELECT shohin_mei, shohin_bunrui, torokubi FROM Shohin WHERE torokubi < '2009-09-27';

-- 計算結果を比較に使うこともできる
SELECT shohin_mei, hanbai_tanka, shiire_tanka FROM Shohin WHERE hanbai_tanka - shiire_tanka >= 500;

CREATE TABLE Chars (
  chr CHAR(3) NOT NULL,
  PRIMARY KEY (chr)
);

BEGIN TRANSACTION;

INSERT INTO Chars VALUES ('1');
INSERT INTO Chars VALUES ('2');
INSERT INTO Chars VALUES ('3');
INSERT INTO Chars VALUES ('10');
INSERT INTO Chars VALUES ('11');
INSERT INTO Chars VALUES ('222');

COMMIT;

SELECT chr
FROM Chars
WHERE chr > '2';


-- NULLは比較結果では帰ってこない
SELECT shohin_mei, shiire_tanka
FROM Shohin
WHERE shiire_tanka = 2800;

-- 下記は機能しない
-- WHERE shiire_tanka = NULL;
-- 下記のようにクエリする
SELECT shohin_mei, shiire_tanka
FROM Shohin
WHERE shiire_tanka IS NULL;

SELECT shohin_mei, shiire_tanka
FROM Shohin
WHERE shiire_tanka IS NOT NULL;
```

# 2-3 論理演算子

```sql
-- NOTで否定条件を作れる
SELECT shohin_mei, shohin_bunrui, hanbai_tanka
FROM Shohin
WHERE hanbai_tanka >= 1000;

SELECT shohin_mei, shohin_bunrui, hanbai_tanka
FROM Shohin
WHERE NOT hanbai_tanka >= 1000;
```

- NOT 演算子を使わなくても表現できる場合は多い。
- 頭の中で変換処理が必要になる場合が多いので NOT 演算子を無理に使う必要はない
- OR より AND が優先される。
  - （）でくくることで、計算の優先度を調整できる
- UNKNOWN：TRUE でも FALSE でも ない第 3 の真偽値
  - 3 値論理と呼ばれる
  - NULL が含まれると、UNKNOWN を考慮する必要が出るので、可能な限り NULL を許容しないこと

```sql
SELECT shohin_mei, shiire_tanka
FROM Shohin
WHERE shohin_bunrui = 'キッチン用品'
AND hanbai_tanka >= 3000;

SELECT shohin_mei, shohin_bunrui, torokubi
FROM Shohin
WHERE Shohin_bunrui = '事務用品';
AND (torokubi = '2009-09-11' OR torokubi = '2009-09-20')
```

```sql
-- 2.1
SELECT torokubi, shohin_mei, torokubi
FROM Shohin
WHERE torokubi > '2009-04-28';

-- 2.2
何も表示されない

-- 2.3
SELECT shohin_mei, hanbai_tanka, shiire_tanka
FROM Shohin
WHERE hanbai_tanka >= shiire_tanka + 500;

SELECT shohin_mei, hanbai_tanka, shiire_tanka
FROM Shohin
WHERE NOT hanbai_tanka < shiire_tanka + 500;

-- 2.4
SELECT shohin_mei, shohin_bunrui, hanbai_tanka * 0.9 - shiire_tanka AS rieki
FROM Shohin
WHERE (hanbai_tanka * 0.9 - shiire_tanka) > 100 AND shohin_bunrui IN ('キッチン用品', '事務用品');
```
